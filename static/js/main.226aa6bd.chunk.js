(this["webpackJsonplearn-project"]=this["webpackJsonplearn-project"]||[]).push([[0],{206:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(38),o=n.n(s),r=(n(206),n(207),n(14)),c=n(34),l=n(24),d=n(25),p=new(function(){function e(t){Object(l.a)(this,e),this._URL=t.URL}return Object(d.a)(e,[{key:"getPost",value:function(e){return fetch("".concat(this._URL,"users?page=").concat(e),{method:"GET"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return Promise.reject("ERROR: ".concat(e.status))}))}}]),e}())({URL:"https://reqres.in/api/"}),u=n(15),m=n(354),j=n(76),b=n(4);var h=function(e){var t=e.morePosts,n=Object(j.c)((function(e){return e.posts})).reduce((function(e,t){return t.key="".concat(t.id),[].concat(Object(u.a)(e),[t])}),[]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(m.a,{dataSource:n,columns:[{title:"id",dataIndex:"id",key:"id"},{title:"user email",dataIndex:"email",key:"email"},{title:"first_name",dataIndex:"first_name",key:"first_name"},{title:"last_name",dataIndex:"last_name",key:"last_name"}],pagination:{defaultPageSize:3,onChange:t}})})},g="PAGE_NUMBER",O="ADD_MORE_POSTS",x="LOGGED_IN",f=n(360),v=n(359),y=n(37),w=n(61),_=n(356),S=n(362),I=n(363),U=n(355),P=n(70),k=n(121),R=n(62);var E=function(e){var t,n,i=Object(c.g)(),s=Object(a.useState)(!1),o=Object(r.a)(s,2),l=o[0],d=o[1],p=R.a().shape({email:R.b().email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:R.b().min(6,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").max(30,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").matches(/^([^0-9]*)$/,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),u=Object(w.d)({mode:"onChange",resolver:Object(k.a)(p)}),m=u.register,j=u.handleSubmit,h=u.formState.errors;return Object(b.jsxs)(v.a,{component:"section",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},sx:{display:"flex",flexDirection:"column",width:350},children:[Object(b.jsx)(f.a,{component:"p",variant:"h5",align:"center",sx:{mb:2},children:"SignIn"}),Object(b.jsxs)(v.a,{onSubmit:j((function(t){e.handleSignIn({email:t.email,password:t.password}).then((function(){i.push("/")})).catch((function(){d(!0)}))})),component:"form",sx:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({type:"email",variant:"outlined",sx:{mb:1},label:"Email"},m("email")),{},{error:!!h.email,helperText:null===h||void 0===h||null===(t=h.email)||void 0===t?void 0:t.message})),Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({type:"password"},m("password")),{},{label:"Password",variant:"outlined",sx:{mb:1},error:!!h.password,helperText:null===h||void 0===h||null===(n=h.password)||void 0===n?void 0:n.message})),l&&Object(b.jsx)(_.a,{severity:"error",children:Object(b.jsx)("strong",{children:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(b.jsx)(S.a,{type:"submit",variant:"contained",sx:{mt:2,height:56},children:"Sign In"})]}),Object(b.jsx)(I.a,{underline:"none",component:P.b,to:"/signup",sx:{mt:2},align:"center",children:"Sign Up"})]})};var L=function(e){var t,n,i,s,o=Object(c.g)(),l=/^([^0-9]*)$/,d=Object(a.useState)(!1),p=Object(r.a)(d,2),u=p[0],m=p[1],j=R.a().shape({email:R.b().email("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:R.b().min(6,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").max(30,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").matches(l,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),confirmPassword:R.b().min(6,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").max(30,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").matches(l,"\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),name:R.b().min(6,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").max(30,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").matches(l,"\u0418\u043c\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043e\u0442 6 \u0434\u043e 30 \u0431\u0443\u043a\u0432").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),h=Object(w.d)({mode:"onChange",resolver:Object(k.a)(j)}),g=h.register,O=h.handleSubmit,x=h.formState.errors;return Object(b.jsxs)(v.a,{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},sx:{display:"flex",flexDirection:"column",width:350},component:"section",children:[Object(b.jsx)(f.a,{variant:"h5",component:"p",align:"center",sx:{mb:2},children:"SignUp"}),Object(b.jsxs)(v.a,{onSubmit:O((function(t){e.handleSignUp({name:t.name,email:t.email,password:t.password,password_confirmation:t.confirmPassword}).then((function(){o.push("/signin")})).catch((function(){m(!0)}))})),component:"form",sx:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({label:"Name",sx:{mb:1},variant:"outlined",type:"text",className:"signUp__input"},g("name")),{},{error:!!x.name,helperText:null===x||void 0===x||null===(t=x.name)||void 0===t?void 0:t.message})),Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({label:"Email",sx:{mb:1},variant:"outlined",type:"text",className:"signUp__input"},g("email")),{},{error:!!x.email,helperText:null===x||void 0===x||null===(n=x.email)||void 0===n?void 0:n.message})),Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({label:"Password",sx:{mb:1},variant:"outlined",type:"password",className:"signUp__input"},g("password")),{},{error:!!x.password,helperText:null===x||void 0===x||null===(i=x.password)||void 0===i?void 0:i.message})),Object(b.jsx)(U.a,Object(y.a)(Object(y.a)({label:"Confirm password",sx:{mb:1},variant:"outlined",type:"password",className:"signUp__input"},g("confirmPassword")),{},{error:!!x.confirmPassword,helperText:null===x||void 0===x||null===(s=x.confirmPassword)||void 0===s?void 0:s.message})),u&&Object(b.jsx)(_.a,{severity:"error",children:Object(b.jsx)("strong",{children:"\u042d\u0442\u043e\u0442 Email \u0443\u0436\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f"})}),Object(b.jsx)(S.a,{variant:"contained",type:"submit",sx:{mt:2,height:56},children:"Sign Up"})]}),Object(b.jsx)(I.a,{underline:"none",component:P.b,to:"/signin",sx:{mt:2},align:"center",children:"Sign Up"})]})},T=new(function(){function e(t){Object(l.a)(this,e),this._URL=t.URL}return Object(d.a)(e,[{key:"_checkResponses",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"signup",value:function(e){return fetch("".concat(this._URL,"/register"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,password:e.password,password_confirmation:e.password_confirmation})}).then(this._checkResponses)}},{key:"signin",value:function(e){return fetch("".concat(this._URL,"/token"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:e.email,password:e.password})}).then(this._checkResponses)}}]),e}())({URL:"http://test.flcd.ru/api"});var N=function(e){return Object(b.jsxs)(c.b,{children:[!1===e.loggedIn&&Object(b.jsx)(c.a,{to:"/signin"}),e.loggedIn&&e.children]})};var D=function(){var e=Object(a.useState)({}),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(j.c)((function(e){return e.page})),o=Object(j.c)((function(e){return e})),l=Object(j.b)();return Object(a.useEffect)((function(){var e;e=s.page,p.getPost(e).then((function(e){i({page:e.page,per_page:e.per_page,total:e.total,total_pages:e.total_pages}),e.data.forEach((function(e){l({type:O,payload:e})}))}))}),[s.page]),Object(b.jsxs)(c.d,{children:[Object(b.jsx)(c.b,{path:"/signup",children:Object(b.jsx)(L,{handleSignUp:function(e){return T.signup(e)}})}),Object(b.jsx)(c.b,{path:"/signin",children:Object(b.jsx)(E,{handleSignIn:function(e){return T.signin(e).then((function(e){l({type:x,payload:!0}),localStorage.setItem("jwt",e.token)}))}})}),Object(b.jsx)(N,{path:"/",loggedIn:o.loggedIn.loggedIn,children:Object(b.jsxs)(v.a,{component:"section",sx:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)(h,{pages:n,morePosts:function(){l({type:g,payload:s.page+1})}}),o.loggedIn.loggedIn&&Object(b.jsx)(f.a,{component:"p",variant:"h5",align:"center",sx:{mb:2}})]})})]})},q=n(119),C={page:1},G=[],J={loggedIn:!1},M=Object(q.a)({page:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;return t.type===g?Object(y.a)(Object(y.a)({},e),{},{page:t.payload}):e},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;return t.type===O?[].concat(Object(u.a)(e),[t.payload]):e},loggedIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return t.type===x?Object(y.a)(Object(y.a)({},e),{},{loggedIn:t.payload}):e}}),A=Object(q.b)(M);o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(P.a,{children:Object(b.jsx)(j.a,{store:A,children:Object(b.jsx)(D,{})})})}),document.getElementById("root"))}},[[316,1,2]]]);
//# sourceMappingURL=main.226aa6bd.chunk.js.map